{"meta":{"title":"想给你讲个故事","subtitle":"个人博客，欢迎交流","description":"","author":"Yong Wu","url":"http://blog.uazw.com","root":"/"},"pages":[{"title":"404 Not Found：该页无法显示","date":"2020-06-16T13:17:15.244Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"/404.html","permalink":"http://blog.uazw.com/404.html","excerpt":"","text":""},{"title":"关于","date":"2020-06-16T13:17:15.244Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"about/index.html","permalink":"http://blog.uazw.com/about/index.html","excerpt":"","text":"个人详细介绍"},{"title":"书单","date":"2020-06-16T13:17:15.244Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"books/index.html","permalink":"http://blog.uazw.com/books/index.html","excerpt":"","text":""},{"title":"分类","date":"2020-06-16T13:17:15.244Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"categories/index.html","permalink":"http://blog.uazw.com/categories/index.html","excerpt":"","text":""},{"title":"友情链接","date":"2020-06-16T13:17:15.244Z","updated":"2020-06-16T13:17:15.244Z","comments":true,"path":"links/index.html","permalink":"http://blog.uazw.com/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2020-06-16T13:17:15.244Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"repository/index.html","permalink":"http://blog.uazw.com/repository/index.html","excerpt":"","text":""},{"title":"标签","date":"2020-06-16T13:17:15.244Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"tags/index.html","permalink":"http://blog.uazw.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"MySQL 执行大批量 SQL 文件随记","slug":"SQL/MySQL 执行大批量 SQL 文件随记","date":"2016-09-25T04:13:00.000Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"2016/09/25/SQL/MySQL 执行大批量 SQL 文件随记/","link":"","permalink":"http://blog.uazw.com/2016/09/25/SQL/MySQL%20%E6%89%A7%E8%A1%8C%E5%A4%A7%E6%89%B9%E9%87%8F%20SQL%20%E6%96%87%E4%BB%B6%E9%9A%8F%E8%AE%B0/","excerpt":"","text":"MySQL 执行大批量 SQL 文件随记 navicat 导出后导入报错 1067 - Invalid default value for '字段名'12345-- 直接在 SQL 文件最前面加入以下内容-- explicit_defaults_for_timestamp 变量, 默认为 OFF-- 在导出的sql文件的开头加上 set explicit_defaults_for_timestamp = 'ON';-- show global variables like '%explicit_defaults_for_timestamp%';set explicit_defaults_for_timestamp = 'ON'; navicat 导入大sql文件报错 2006 - MySQL server has gone away123456-- 直接在 SQL 文件最前面加入以下内容-- show global variables like '%explicit_defaults_for_timestamp%';set max_allowed_packet = 1073741824;-- 如果无权限执行，可能更换高权限账号或者提高权限-- set global max_allowed_packet = 1073741824;set global max_allowed_packet = 1073741824;","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.uazw.com/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.uazw.com/tags/MySQL/"}]},{"title":"SQL语法","slug":"SQL/SQL 语法","date":"2016-09-25T04:13:00.000Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"2016/09/25/SQL/SQL 语法/","link":"","permalink":"http://blog.uazw.com/2016/09/25/SQL/SQL%20%E8%AF%AD%E6%B3%95/","excerpt":"","text":"SQL 语法 日期获取获取当前日期时间12select now();select sysdate();获取当前日期12select curdate();select current_date;获取当前时间 hh:mi:ss1select time(sysdate());获取 年、月、日、时、分、秒、毫秒1234567891011121314/*年*/select year(current_date);/*月*/select month(current_date);/*日*/select day(current_date);/*时*/select hour(sysdate());/*分*/select minute(sysdate());/*秒*/select second(sysdate());/*毫秒*/select microsecond(sysdate()); 日期函数日期运算12345678910111213/*带时分秒的源日期计算之后也带时分秒*//*前一年*/select date_sub(curdate(), interval 1 year);/*前一月*/select date_sub(curdate(), interval 1 month);/*前一天日期*/select date_sub(curdate(), interval 1 day);/*前一小时*/select date_sub(sysdate(), interval 1 hour);/*前一分*/select date_sub(sysdate(), interval 1 minute);/*前一秒*/select date_sub(sysdate(), interval 1 second); 日期格式化1234/*yyyy-mm-dd hh24:mi:ss*/select str_to_date('2016-09-23 16:03:28', '%Y-%m-%d %H:%i:%s');/*yyyy-mm-dd*/select str_to_date('2016-09-23 16:03:28', '%Y-%m-%d'); if 函数if12select if('0' = '1', 0, 1);select if(0 != 1, 0, 1);ifnull12select ifnull(null, 0);select ifnull(1, 0);","categories":[{"name":"SQL","slug":"SQL","permalink":"http://blog.uazw.com/categories/SQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.uazw.com/tags/MySQL/"},{"name":"SQL","slug":"SQL","permalink":"http://blog.uazw.com/tags/SQL/"}]},{"title":"MySQL与Oracle SQL语法区别","slug":"SQL/MySQL与Oracle SQL语法区别","date":"2016-09-23T10:16:00.000Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"2016/09/23/SQL/MySQL与Oracle SQL语法区别/","link":"","permalink":"http://blog.uazw.com/2016/09/23/SQL/MySQL%E4%B8%8EOracle%20SQL%E8%AF%AD%E6%B3%95%E5%8C%BA%E5%88%AB/","excerpt":"","text":"MySQL与Oracle SQL语法区别最近因为客户公司主张 去IOE，所以要求把项目上使用的 Oracle 数据库切换到 MySQL，所以花了点时间对项目进行重构，主要工作是修改 SQL 语法上，总结下重构过程遇到的 Oracle 和 MySQL 的语法区别，因为采用了 MyBatis 作为 ORM 框架，所以顺便把两种数据库都做了支持，配置切换。 日期类MySQL12345678910-- 获取当前日期select curdate();select current_date;-- 获取当前时间select now();select sysdate();-- 获取时间中的年月日部分select date(now());-- 获取时间中的时分秒部分select time(now());Oracle12-- 获取当前时间select sysdate from dual; 日期字符串转换MySQL12345/* 字符串转为时间格式 */select str_to_date('2016-09-23 16:03:30', '%Y-%m-%d %H:%i:%s');-- 2016-09-23 16:03:30select str_to_date('2016-09-22 16:03:30', '%Y-%m-%d');-- 2016-09-22Oracle12345/* 字符串转为时间格式，分秒不会消失 */select to_date('2016-09-23 16:03:30', 'yyyy-mm-dd hh24:mi:ss') from dual;-- 2016-09-23 16:03:30select to_date('2016-09-22', 'yyyy-mm-dd') from dual;-- 2016-09-22 00:00:00 简单判断函数MySQL if函数12345/* if(exp,attr0,attr1),如果exp为true，则返回attr0，false则返回attr1*/select if('0'='1',0,1);-- 1select if(0!=1,0,1);-- 0Oracle decode12345/* decode(exp0,exp1,attr0,attr1),如果exp0=exp1,则返回attr0，否则则返回attr1 */select decode(0,1,0,1) from dual;-- 1select decode('0','0',0,1) from dual;-- 0 对 null 的判断MySQL ifnull12345/* if(exp0,exp1)，如果exp0为null则返回exp1，如果exp0不为null则返回exp0 */select ifnull(null,0);-- 0select ifnull(1,0);-- 1Oracle nvl12345/* nvl(exp0,exp1)，如果exp0为null则返回exp1，如果exp0不为null则返回exp0 */select nvl(null,0) from dual;-- 0select nvl(1,0) from dual;-- 1","categories":[{"name":"SQL","slug":"SQL","permalink":"http://blog.uazw.com/categories/SQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.uazw.com/tags/MySQL/"},{"name":"SQL","slug":"SQL","permalink":"http://blog.uazw.com/tags/SQL/"},{"name":"Oracle","slug":"Oracle","permalink":"http://blog.uazw.com/tags/Oracle/"}]},{"title":"Oracle 查看锁","slug":"SQL/Oracle 查看锁信息","date":"2016-08-10T02:34:00.000Z","updated":"2020-06-16T13:17:15.244Z","comments":false,"path":"2016/08/10/SQL/Oracle 查看锁信息/","link":"","permalink":"http://blog.uazw.com/2016/08/10/SQL/Oracle%20%E6%9F%A5%E7%9C%8B%E9%94%81%E4%BF%A1%E6%81%AF/","excerpt":"","text":"Oracle 查看锁 相关表v$lockv$sqlareav$sessionv$processv$locked_objectall_objectsv$session_wait 查看被锁的和具体的操作用户信息12345678910111213141516171819select do.owner, do.object_name, lo.session_id, lo.locked_mode, s.username, s.sid, s.serial#, s.username, s.osuser, s.machine, s.terminal, s.program, s.action, s.logon_timefrom v$locked_object lo, dba_objects do, v$session swhere do.object_id = lo.object_id and lo.session_id = s.sid 杀死进程12# sid + serialalter system kill session [sid,serial#];","categories":[{"name":"Oracle","slug":"Oracle","permalink":"http://blog.uazw.com/categories/Oracle/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"http://blog.uazw.com/tags/SQL/"},{"name":"Oracle","slug":"Oracle","permalink":"http://blog.uazw.com/tags/Oracle/"}]}],"categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.uazw.com/categories/MySQL/"},{"name":"SQL","slug":"SQL","permalink":"http://blog.uazw.com/categories/SQL/"},{"name":"Oracle","slug":"Oracle","permalink":"http://blog.uazw.com/categories/Oracle/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.uazw.com/tags/MySQL/"},{"name":"SQL","slug":"SQL","permalink":"http://blog.uazw.com/tags/SQL/"},{"name":"Oracle","slug":"Oracle","permalink":"http://blog.uazw.com/tags/Oracle/"}]}